<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BingMaps Library</title>
<style>html,body{color:white;height:100%;}body{padding:0;margin:0;background:#333;}h1{padding:0;margin:0;font-size:50%;}</style>
</head>
<body>

<!-- MAP[START] -->
<h1>BingMaps Library Sample</h1>
<div id="myMap" style='width:100%;height:80%;'></div>
<div id="geocode">geocode:data</div>
<!-- MAP[END] -->


<script src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=Ai1EjjRtNmjFeZ_-crF4Ar1EeGWAa7oHR0APXB1n5K2SIlmjGd7MIyp1aA3fA6rT' async defer></script>
<script src="js/BmapQuery.js"></script>
<script>
//****************************************************************************************
// BingMaps&BmapQuery
//****************************************************************************************
//Init
function GetMap(){
    
    //Instance
    let map = new Bmap("#myMap");
    
    //Map:Init
    map.startMap(47.6149, -122.1941, "load", 16);
    
    //Map:Event
    map.eventMap("click",function(){
        alert("MapEvent!");
    });
    
    //Pushpin
    let pin1 = map.pin(47.6149, -122.1941, "#ff0000");
    
    //Pushpin:Text
    let pin2 = map.pinText(47.6160, -122.1950, "title","subtitle","A");
    
    //Pushpin:Icon
    let pin3 = map.pinIcon(47.6130, -122.1945, "img/poi_custom.png", 1.0, 0, 0);
    
    //pushpin:Event
    map.eventPin(pin1, "click", function(){
        alert("PinEvent1");
    });
    
    //Infobox
    map.infobox(47.6149, -122.1941, "1 step", "Start");
    
    //Infobox:html
    const html = '<div style="background:red;">Hello,world</div>';
    map.infoboxHtml(47.6160, -122.1950, html);
    
    //after 2 seconds.
    setTimeout(function(){
        //MapViewChange
        map.changeMap(47.6150, -122.1950, "load", 17);
    },2000);

    //after 4 seconds.
    setTimeout(function () {
        //GeocodeJson
        map.getGeocode("Seattle", function(data){
            //checkCode: variable data.
            alert("getGeocode");
            document.querySelector("#geocode").innerHTML=data;
        });
    },4000);
    
    //after 6 seconds.
    setTimeout(function () {
        //ReverseGeocodeJson
        map.reverseGeocode("Seattle", function(data){
            //checkCode: variable data.
            alert("ReverseGeocode");
            document.querySelector("#geocode").innerHTML=data;
        });
        
    },6000);
}
 
    
</script>


</body>
</html>